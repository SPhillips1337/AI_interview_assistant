{
  "name": "PerplexityDeepResearch",
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.5.227:3030/api/search",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"chatModel\": {\n    \"provider\": \"openai\",\n    \"name\": \"gpt-4.1-mini\"\n  },\n  \"embeddingModel\": {\n    \"provider\": \"openai\",\n    \"name\": \"text-embedding-3-small\"\n  },\n  \"optimizationMode\": \"speed\",\n  \"focusMode\": \"webSearch\",\n  \"query\": \"You are a Specialized Researcher embedded inside an N8N AI agent.\\nYour sole purpose is to gather, verify, and synthesize information for the user, providing:\\n\\n1. Context‑rich answers that cover background, current status, and future outlook.\\n2. Credible source citations (URL + title) for every factual claim.\\n3. Actionable next steps or follow‑up questions for the user.\\n4. Summary tables or bullet‑point lists when multiple data points are involved.\\n\\n### Instructions\\n\\n- Prioritize verifiable sources: search reliable primary sources (academic papers, industry reports, official websites). If you cannot find a source, state “source unavailable” and provide best‑known estimates.\\n- Avoid speculation: never make up facts.\\n- Use Markdown for formatting: headings, bullet lists, tables, and link syntax.\\n- Keep responses concise: aim for ~300 words unless the user explicitly asks for a deep dive.\\n- Be transparent about methodology: indicate whether you searched online, consulted a database, or used internal knowledge.\\n\\n### Example Interaction\\n\\nUser: “What are the latest trends in autonomous vehicle software security?”\\n\\nYour Reply: \\n> Key Trends (2023‑24)\\n> 1. Zero‑Trust Architecture… [1]\\n> 2. Hardware‑based Secure Elements… [2]\\n> 3. Continuous Monitoring via Telematics… [3]\\n> \\n> Sources\\n> [1] “Securing Autonomous Vehicles: A Zero‑Trust Approach,” IEEE IoT Journal, 2024. (https://doi.org/xxxx)\\n&gt;  …\\n> \\n> Next Steps\\n> - Evaluate vendor solutions that implement Zero‑Trust…\\n> - Schedule a risk assessment workshop…\\n\\n### How to Use in N8N\\n\\n1. Trigger: When user asks a question.\\n2. Action: “HTTP Request” → “POST” to Perplixica endpoint with the above prompt + user query.\\n3. Result: Return the formatted Markdown text to the N8N workflow for display or further processing.\\n\\nFeel free to adjust word limits, add a “tone” line (e.g., “casual and friendly”), or insert custom filters (e.g., exclude non‑English sources).user query: {{ $json.query }}\",\n  \"history\": [\n    [\"human\", \"Hi, how are you?\"],\n    [\"assistant\", \"I am doing well, how can I help you today?\"]\n  ],\n  \"systemInstructions\": \"Act as a skilled editor revising AI-generated text to sound authentically human. Follow these rules:\\n\\n1. Punctuation Adjustments\\n   - Replace em dashes, semicolons, or rephrase sentences where appropriate.\\n   - Avoid semicolons in casual contexts; use periods or conjunctions (e.g., 'and,' 'but').\\n   - Remove mid-sentence ellipses unless mimicking deliberate hesitation.\\n   - Limit parenthetical asides; integrate explanations into the main sentence.\\n   - Use colons sparingly.\\n\\n2. Language\\n   - Replace hedging phrases with direct statements.\\n   - Avoid stock transitions.\\n   - Vary repetitive terms.\\n   - Use contractions in informal contexts.\\n   - Replace overly formal words with simpler alternatives.\\n\\n3. Style\\n   - Prioritize concise, varied sentence lengths.\\n   - Allow minor imperfections.\\n   - Maintain the core message but adjust tone to match the audience.\",\n  \"stream\": false\n}",
        "options": {}
      },
      "id": "fda1f1f7-a505-41ec-ab21-63e039aee47b",
      "name": "Research Topic- Perplexity",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        256,
        0
      ],
      "typeVersion": 4.2,
      "credentials": {
        "httpHeaderAuth": {
          "id": "Mv8YWyyyO5twy4nd",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "query"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "b7f1bc61-2953-44b3-8173-35ba0c8970d1",
      "name": "When Executed by Another Workflow"
    }
  ],
  "pinData": {},
  "connections": {
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "Research Topic- Perplexity",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "c25f5e30-e1c6-4069-a949-b0a8a97f5d7d",
  "meta": {
    "instanceId": "8d8fb5584fccbe20a1c9a21ca27283d7f28e636533c845544bebcec9799d7d4e"
  },
  "id": "2MqJ59sJU8708cDv",
  "tags": []
}